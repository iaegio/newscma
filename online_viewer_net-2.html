<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Newsletter Options - CMA CGM Strategic Watch</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body { font-family: Arial, Helvetica, sans-serif; background-color: #E8E8E8; min-height: 100vh; display: flex; flex-direction: column; }
    
    /* Header Styles */
    .header { background-color: #0A2071; padding: 20px 40px; display: flex; align-items: center; justify-content: space-between; }
    .header img { height: 50px; filter: brightness(0) invert(1); }
    .header-title { color: #FFFFFF; font-size: 14px; font-weight: 600; letter-spacing: 1px; text-transform: uppercase; }
    
    /* Main Layout */
    .main-content { flex: 1; display: flex; align-items: center; justify-content: center; padding: 40px 20px; }
    
    /* Card Styles */
    .options-card { 
        background-color: #FFFFFF; 
        border-radius: 8px; 
        box-shadow: 0 4px 20px rgba(0,0,0,0.1); 
        max-width: 500px; 
        width: 100%; 
        overflow: visible; 
        border-top: 6px solid #E20101; 
    }
    
    .card-header { background-color: #0A2071; padding: 25px 30px; text-align: center; }
    .card-header h1 { color: #FFFFFF; font-size: 22px; font-weight: 700; margin-bottom: 8px; }
    .card-header p { color: rgba(255,255,255,0.7); font-size: 14px; }
    .card-body { padding: 30px; }
    
    /* Form Elements */
    .option-group { margin-bottom: 25px; }
    .option-title { font-size: 14px; font-weight: 700; color: #0A2071; margin-bottom: 12px; text-transform: uppercase; letter-spacing: 0.5px; }
    .option-item { display: flex; align-items: center; padding: 12px 15px; background-color: #F9FAFB; border-radius: 6px; margin-bottom: 10px; cursor: pointer; transition: all 0.2s ease; border: 2px solid transparent; }
    
    .option-item:hover { background-color: #F0F4F8; border-color: #0A2071; }
    .option-item input { width: 18px; height: 18px; margin-right: 12px; accent-color: #0A2071; }
    .option-item label { font-size: 14px; color: #1A1A1A; cursor: pointer; flex: 1; }
    
    .divider { height: 1px; background-color: #E5E5E5; margin: 25px 0; }
    
    /* --- CUSTOM DROPDOWN STYLES --- */
    .custom-select-wrapper { position: relative; user-select: none; width: 100%; z-index: 200; }
    .custom-select { position: relative; display: flex; flex-direction: column; }
    .custom-select-trigger { position: relative; display: flex; align-items: center; justify-content: space-between; padding: 12px 15px; font-size: 14px; font-weight: 400; color: #333; background: #F9FAFB; border: 2px solid transparent; border-radius: 6px; cursor: pointer; transition: all 0.2s; }
    .custom-select-trigger:hover { background-color: #F0F4F8; border-color: #0A2071; }
    .custom-options { position: absolute; display: block; top: 100%; left: 0; right: 0; border: 1px solid #0A2071; border-top: 0; background: #fff; transition: all 0.3s; opacity: 0; visibility: hidden; pointer-events: none; z-index: 100; border-radius: 0 0 6px 6px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); margin-top: 2px; }
    .custom-select.open .custom-options { opacity: 1; visibility: visible; pointer-events: all; }
    .custom-option { position: relative; display: flex; align-items: center; padding: 12px 15px; font-size: 14px; color: #333; cursor: pointer; transition: all 0.2s; }
    .custom-option:hover { background-color: #F0F4F8; color: #0A2071; font-weight: 600; }
    .custom-option.selected { background-color: #F0F4F8; font-weight: 600; }
    .flag-icon { width: 20px; height: 15px; margin-right: 10px; object-fit: cover; border-radius: 2px; box-shadow: 0 0 2px rgba(0,0,0,0.2); }
    .arrow { border: solid #0A2071; border-width: 0 2px 2px 0; display: inline-block; padding: 3px; transform: rotate(45deg); transition: transform 0.2s; margin-left: 10px; }
    .custom-select.open .arrow { transform: rotate(-135deg); margin-top: 5px; }
    /* ------------------------------ */

    /* Buttons & Animation Cargo */
    .btn { display: inline-block; padding: 12px 30px; font-size: 14px; font-weight: 600; border-radius: 4px; text-decoration: none; cursor: pointer; transition: all 0.2s ease; border: none; }
    
    .btn-primary { 
        background-color: #0A2071; 
        color: #FFFFFF; 
        width: 100%; 
        text-align: center;
        position: relative; /* Nécessaire pour l'animation */
        overflow: hidden;   /* Cache le cargo quand il est "dehors" */
        height: 45px; /* Hauteur fixe pour contenir le navire */
        display: flex;
        align-items: center;
        justify-content: center;
    }
    .btn-primary:hover { background-color: #06154a; }

    /* Le texte doit être au dessus du cargo */
    .btn-text {
        position: relative;
        z-index: 5;
        text-shadow: 0 1px 2px rgba(0,0,0,0.3); /* Améliore la lisibilité sur le navire */
    }

    /* Le nouveau cargo (SVG détaillé) */
    .cargo-ship {
        position: absolute;
        top: 50%;
        transform: translateY(-50%);
        left: -250px; /* Position de départ (hors champ à gauche, plus large) */
        width: 220px; /* Navire plus grand */
        height: auto;
        opacity: 0.8; /* Légère transparence pour que le texte reste lisible */
        z-index: 1;
        pointer-events: none;
    }

    /* Animation au survol - plus lente pour le grand navire */
    .btn-primary:hover .cargo-ship {
        animation: sailAcross 4s linear infinite;
    }

    @keyframes sailAcross {
        0% { left: -250px; }
        100% { left: 100%; }
    }
    
    /* Unsubscribe Link */
    .unsubscribe-link { display: block; text-align: center; margin-top: 15px; font-size: 11px; color: #999999; text-decoration: underline; cursor: pointer; }
    .unsubscribe-link:hover { color: #E20101; }
    
    .button-group { margin-top: 25px; }
    
    /* Footer */
    .footer { background-color: #0A2071; padding: 30px 40px; text-align: center; }
    .footer p { color: rgba(255,255,255,0.6); font-size: 11px; margin-bottom: 20px; }
    .footer-logos { height: 35px; width: auto; filter: brightness(0) invert(1); opacity: 0.7; }
    
    /* Messages */
    .success-message { display: none; background-color: #F0FDF4; border: 1px solid #039855; border-radius: 6px; padding: 20px; text-align: center; margin-bottom: 20px; }
    .success-message.show { display: block; }
    .success-message h3 { color: #027A48; font-size: 16px; margin-bottom: 8px; }
    
    @media (max-width: 600px) { 
      .header { padding: 15px 20px; flex-direction: column; gap: 10px; } 
      .card-body { padding: 20px; }
      .footer { padding: 20px; }
      .footer-logos { height: 25px; }
    }
  </style>
</head>
<body>
  <header class="header">
    <img src="https://raw.githubusercontent.com/iaegio/newscma/e965f238297f1ad24ca77fc221ea48a490f9ccce/CMA%20CGM_idGDHHFMrC_1.png" alt="CMA CGM">
    <span class="header-title">Strategic Watch Preferences</span>
  </header>
  
  <main class="main-content">
    <div class="options-card">
      <div class="card-header">
        <h1>Newsletter Options</h1>
        <p>Customize your strategic intelligence feed</p>
      </div>
      
      <div class="card-body">
        
        <div class="success-message" id="success-msg">
          <h3>✓ Preferences Saved</h3>
          <p>Your settings have been updated.</p>
        </div>

        <div class="option-group">
          <div class="option-title">Language Preference</div>
          <div class="custom-select-wrapper">
            <div class="custom-select">
                <div class="custom-select-trigger">
                    <div style="display: flex; align-items: center;">
                        <img src="https://flagcdn.com/w40/gb.png" class="flag-icon" id="current-flag" alt="English">
                        <span id="current-lang">English</span>
                    </div>
                    <div class="arrow"></div>
                </div>
                <div class="custom-options">
                    <div class="custom-option selected" data-value="en" data-flag="https://flagcdn.com/w40/gb.png">
                        <img src="https://flagcdn.com/w40/gb.png" class="flag-icon" alt="UK"> English
                    </div>
                    <div class="custom-option" data-value="fr" data-flag="https://flagcdn.com/w40/fr.png">
                        <img src="https://flagcdn.com/w40/fr.png" class="flag-icon" alt="France"> French
                    </div>
                    <div class="custom-option" data-value="es" data-flag="https://flagcdn.com/w40/es.png">
                        <img src="https://flagcdn.com/w40/es.png" class="flag-icon" alt="Spain"> Spanish
                    </div>
                    <div class="custom-option" data-value="lb" data-flag="https://flagcdn.com/w40/lb.png">
                        <img src="https://flagcdn.com/w40/lb.png" class="flag-icon" alt="Lebanon"> Lebanese
                    </div>
                </div>
            </div>
            <input type="hidden" name="language" id="selected-language" value="en">
          </div>
        </div>

        <div class="divider"></div>

        <div class="option-group">
          <div class="option-title">Region of Interest</div>
          
          <div class="option-item">
            <input type="checkbox" id="region-northam" name="region" value="northam" checked>
            <div><label for="region-northam">Region North America</label></div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="region-europe" name="region" value="europe">
            <div><label for="region-europe">Region Europe</label></div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="region-apac" name="region" value="apac">
            <div><label for="region-apac">Region Asia Pacific (APAC)</label></div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="region-levant" name="region" value="levant">
            <div><label for="region-levant">Region Middle East (The Levant)</label></div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="region-gulf" name="region" value="gulf">
            <div><label for="region-gulf">Region Middle East (The Gulf)</label></div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="region-latam" name="region" value="latam">
            <div><label for="region-latam">Region Latin America</label></div>
          </div>

          <div class="option-item">
            <input type="checkbox" id="region-africa" name="region" value="africa">
            <div><label for="region-africa">Region Africa</label></div>
          </div>
        </div>

        <div class="divider"></div>

        <div class="option-group">
          <div class="option-title">Delivery Frequency</div>
          <div class="option-item">
            <input type="radio" id="freq-weekly" name="frequency" value="weekly" checked>
            <div>
              <label for="freq-weekly">Weekly (Monday 8:00 AM)</label>
            </div>
          </div>
          <div class="option-item">
            <input type="radio" id="freq-monthly" name="frequency" value="monthly">
            <div>
              <label for="freq-monthly">Monthly Digest</label>
            </div>
          </div>
        </div>
        
        <div class="button-group">
          <button class="btn btn-primary" onclick="savePreferences()">
            <span class="btn-text">Save Preferences</span>
            <svg class="cargo-ship" viewBox="0 0 800 300" xmlns="http://www.w3.org/2000/svg">
              <g id="cma-vessel">
                <path d="M 50,220 L 750,220 L 780,200 L 20,200 Z" fill="#000080" />
                <rect x="50" y="220" width="700" height="10" fill="#FF0000" />
                <text x="400" y="215" font-family="Arial" font-size="20" fill="white" text-anchor="middle" font-weight="bold">CMA CGM</text>
                <text x="100" y="215" font-family="Arial" font-size="10" fill="white">CMA CGM MARCO POLO</text>
                <rect x="80" y="150" width="600" height="50" fill="#4682B4" stroke="#2F4F4F" stroke-width="1" />
                <rect x="80" y="100" width="600" height="50" fill="#4682B4" stroke="#2F4F4F" stroke-width="1" />
                <rect x="80" y="50" width="600" height="50" fill="#4682B4" stroke="#2F4F4F" stroke-width="1" />
                <rect x="550" y="20" width="100" height="80" fill="white" stroke="#A9A9A9" stroke-width="1" />
                <rect x="560" y="30" width="80" height="20" fill="#87CEEB" />
                <path d="M 50,230 Q 0,240 50,250 L 0,250 L 0,230 Z" fill="white" opacity="0.7" />
              </g>
            </svg>
          </button>
          
          <a id="unsubscribe-btn" class="unsubscribe-link">Unsubscribe from all lists</a>
        </div>

      </div>
    </div>
  </main>
  
  <footer class="footer">
    <p>CMA CGM Group - Leading Worldwide Shipping Group<br>Strategic Intelligence Unit</p>
    <img src="https://raw.githubusercontent.com/iaegio/newscma/main/idVeH4KU6W_logos.png" alt="CMA CGM Group Entities" class="footer-logos">
    <p style="margin-top: 15px; margin-bottom: 0; opacity: 0.4; font-size: 10px;">Prototyped by Hugo GIOVANANGELI</p>
  </footer>

  <script>
    const baseUrl = 'https://srv1133928.hstgr.cloud'; 

    // Custom Dropdown Logic
    document.querySelector('.custom-select-wrapper').addEventListener('click', function() {
        this.querySelector('.custom-select').classList.toggle('open');
    });

    for (const option of document.querySelectorAll(".custom-option")) {
        option.addEventListener('click', function() {
            if (!this.classList.contains('selected')) {
                this.parentNode.querySelector('.custom-option.selected').classList.remove('selected');
                this.classList.add('selected');
                document.getElementById('current-lang').textContent = this.textContent.trim();
                document.getElementById('current-flag').src = this.getAttribute('data-flag');
                document.getElementById('selected-language').value = this.getAttribute('data-value');
            }
        });
    }

    window.addEventListener('click', function(e) {
        const select = document.querySelector('.custom-select');
        if (!select.contains(e.target)) {
            select.classList.remove('open');
        }
    });

    function savePreferences() {
        document.getElementById('success-msg').classList.add('show');
        window.scrollTo(0, 0);
    }

    document.getElementById('unsubscribe-btn').onclick = function(e) {
      e.preventDefault();
      const checkboxes = document.querySelectorAll('input[name="region"]');
      checkboxes.forEach(cb => {
        cb.checked = false;
        cb.closest('.option-item').style.opacity = '0.5';
      });
      alert("All regions have been unchecked. Please click 'Save Preferences' to confirm.");
    };

    const allRegionCheckboxes = document.querySelectorAll('input[name="region"]');
    allRegionCheckboxes.forEach(cb => {
        cb.addEventListener('change', function() {
            if (this.checked) {
                this.closest('.option-item').style.opacity = '1';
            }
        });
    });
  </script>
</body>
</html>
